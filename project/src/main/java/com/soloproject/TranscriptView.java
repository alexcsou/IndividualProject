package com.soloproject;

import javafx.geometry.Orientation;
import javafx.scene.control.Label;
import javafx.scene.control.Separator;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.text.TextAlignment;

/**
 * A view displayed in the transcript tab of the app, containing various
 * transcript analysis results and information.
 */
public class TranscriptView {

    private BorderPane mainPane;
    private TranscriptHandler handler;

    public TranscriptView(TranscriptHandler handler) {
        this.handler = handler;
        mainPane = new BorderPane();
        makeView();
    }

    public void makeView() {
        VBox chatBubbles = new VBox(new Label("test"));

        VBox meetingDetails = new VBox();

        Label meetingInformation = new Label("Meeting Information\n" + "_");
        meetingInformation.setTextAlignment(TextAlignment.CENTER);
        meetingInformation.getStyleClass().add("bigTitle");
        Label meetingName = new Label(
                "Meeting Name: " + handler.getTranscript().getName().replace("_AutoGeneratedCaption.vtt", ""));
        Label meetingDuration = new Label("Meeting Duration: " + handler.getMeetingDurationString());
        Label totalSeconds = new Label("Meeting duration in seconds: " + handler.getMeetingDurationSeconds());
        Label meetingLanguage = new Label("Meeting language: " + handler.getLanguage());
        Label sentenceCount = new Label("Number of spoken sentences: " + handler.getFullSentenceCount());
        Label wordCount = new Label("Number of spoken words: " + handler.getNumberOfWords());
        Label meetingRecog = new Label(
                "Transcript accuracy: " + handler.getTranscriptRecognizabilityDouble() * 100 + "%");
        Label wordsPerMinute = new Label(
                "Words spoken per minute: " + handler.getNumberOfWords() / (handler.getMeetingDurationSeconds() / 60));
        Label avgSentenceLength = new Label(
                "Average sentence length: " + handler.getNumberOfWords() / handler.getFullSentenceCount() + " words.");

        meetingDetails.getChildren().addAll(meetingName, meetingLanguage, meetingDuration, totalSeconds, meetingRecog,
                wordCount,
                wordsPerMinute,
                sentenceCount, avgSentenceLength);
        meetingDetails.getStyleClass().add("transcriptVBox");
        meetingDetails.getChildren().forEach(c -> {
            if (c != meetingInformation) {
                c.getStyleClass().add("meetingInfo");
            }
        });

        mainPane.setCenter(chatBubbles);
        mainPane.setRight(meetingDetails);
    }

    public BorderPane getView() {
        return mainPane;
    }

}
